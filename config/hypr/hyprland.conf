################################################################################
# MONITOR VARIABLES - `hyprctl monitors`
################################################################################
$MONITOR_MAIN = DP-6
$MONITOR_LEFT = HDMI-A-3  
$MONITOR_RIGHT = DP-4

################################################################################
# MONITORS (posizioni da `hyprctl monitors`)
################################################################################
monitor=$MONITOR_LEFT,1920x1080@60,1920x1440,1
monitor=$MONITOR_MAIN,3440x1440@240.09,1920x0,1
# fallback se 240Hz non stabile:
# monitor=$MONITOR_MAIN,3440x1440@144.05,1920x0,1
# Destra ($MONITOR_RIGHT) ruotato a 90°
monitor=$MONITOR_RIGHT,1920x1200@59.95,5360x0,1,transform,1


# Se vuoi disabilitare i laterali:
# monitor=$MONITOR_LEFT,disable
# monitor=$MONITOR_RIGHT,disable

################################################################################
# WORKSPACE RULES: 1–4 sempre e solo su $MONITOR_MAIN
################################################################################
workspace = 1, monitor:$MONITOR_MAIN, default:true, persistent:true
workspace = 2, monitor:$MONITOR_MAIN, persistent:true
workspace = 3, monitor:$MONITOR_MAIN, persistent:true
workspace = 4, monitor:$MONITOR_MAIN, persistent:true

################################################################################
# GENERALE
################################################################################
general {
  resize_on_border = 1
  border_size = 4
  col.active_border = rgba(00E5FFFF) rgba(FF00D4FF) 45deg
  col.inactive_border = rgba(1D2630CC)
  gaps_in = 8
  gaps_out = 1
}

################################################################################
# INPUT
################################################################################
input {
  kb_layout = us
}

################################################################################
# DECORATION / OPACITA'
################################################################################
decoration {
  active_opacity = 0.90
  inactive_opacity = 0.80
  rounding = 8
}

################################################################################
# AUTOSTART
################################################################################
exec-once = waybar &
exec-once = hyprpaper -c ~/.config/hyprpaper/hyprpaper.conf &

# Crea subito i WS 1..4 su $MONITOR_MAIN all'avvio
exec-once = hyprctl dispatch focusmonitor $MONITOR_MAIN
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 1, default:true
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 2
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 3
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 4

# Dopo averli creati, vai sul WS 1
exec-once = hyprctl dispatch workspace 1

################################################################################
# BINDS DI SISTEMA / APP
################################################################################
bind = SUPER, S, exec, kitty
bind = SUPER, D, exec, rofi -show drun
bind = SUPER, R, exec, rofi -show run
bind = SUPER, W, exec, rofi -show window
bind = SUPER, A, killactive
bind = SUPER, M, exit
bind = CTRL, SPACE, togglefloating
bind = SUPER, F, fullscreen

################################################################################
# NAVIGAZIONE WS SUL MONITOR PRINCIPALE ($MONITOR_MAIN)
################################################################################
bind = SUPER, SPACE, workspace, 1
bind = SUPER, Z, workspace, 2
bind = SUPER, X, workspace, 3
bind = SUPER, C, workspace, 4

################################################################################
# MOVE SILENZIOSO (non cambia focus)
################################################################################
bind = SUPER CTRL, SPACE, movetoworkspacesilent, 1
bind = SUPER CTRL, Z, movetoworkspacesilent, 2
bind = SUPER CTRL, X, movetoworkspacesilent, 3
bind = SUPER CTRL, C, movetoworkspacesilent, 4

################################################################################
# MOUSE
################################################################################
bindm = CTRL ALT, mouse:272, movewindow

################################################################################
# Screenshot
################################################################################
bind = , Print, exec, grim /screenshot-$(date +%Y%m%d_%H%M%S).png
bind = SHIFT, Print, exec, grim -g "$(slurp)" ~/Pictures/screenshot-$(date +%Y%m%d_%H%M%S).png
bind = CTRL, Print, exec, grim -g "$(slurp)" - | wl-copy
################################################################################
# Media
################################################################################
bindl = , XF86AudioPlay,  exec, playerctl play-pause
bindl = , XF86AudioPause, exec, playerctl play-pause   # opzionale, per tastiere che emettono Pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl  = , XF86AudioMute,        exec, wpctl set-mute   @DEFAULT_AUDIO_SINK@ toggle

################################################################################
# APP OPACITY RULES (Waybar-launched utilities)
################################################################################
# Ensure external component windows follow semi-transparent look
# Active / Inactive opacity: 0.94 / 0.85 to align with global feel
windowrulev2 = opacity 0.94 0.85, class:^(pavucontrol)$
windowrulev2 = opacity 0.94 0.85, class:^(blueman-manager)$
windowrulev2 = opacity 0.94 0.85, class:^([Gg]simplecal)$
windowrulev2 = opacity 0.94 0.85, class:^(rofi)$
