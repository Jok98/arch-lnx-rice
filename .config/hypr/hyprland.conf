################################################################################
# MONITOR VARIABLES - `hyprctl monitors`
$MONITOR_MAIN = DP-6
$MONITOR_LEFT = HDMI-A-3  
$MONITOR_RIGHT = DP-4

################################################################################
# MONITORS (posizioni da `hyprctl monitors`)
monitor=$MONITOR_LEFT,1920x1080@60,1920x1440,1
monitor=$MONITOR_MAIN,3440x1440@240.09,1920x0,1
# Destra ($MONITOR_RIGHT) ruotato a 90°
monitor=$MONITOR_RIGHT,1920x1200@59.95,5360x0,1,transform,1


################################################################################
# WORKSPACE RULES: 1–4 sempre e solo su $MONITOR_MAIN
workspace = 1, monitor:$MONITOR_MAIN, default:true, persistent:true
workspace = 2, monitor:$MONITOR_MAIN, persistent:true
workspace = 3, monitor:$MONITOR_MAIN, persistent:true
workspace = 4, monitor:$MONITOR_MAIN, persistent:true

################################################################################
# GENERALE
general {
  resize_on_border = 1
  border_size = 2
  col.active_border = rgba(00E5FFFF) rgba(FF00D4FF) 45deg
  col.inactive_border = rgba(1D2630CC)
  gaps_in = 8
  gaps_out = 1
}

################################################################################
# INPUT
input {
  kb_layout = us
}

################################################################################
# DECORATION / OPACITA'
decoration {
  active_opacity = 0.90
  inactive_opacity = 0.80
  rounding = 8
}

################################################################################
# AUTOSTART
exec-once = waybar &
exec-once = hyprpaper -c ~/.config/hyprpaper/hyprpaper.conf &

# Crea subito i WS 1..4 su $MONITOR_MAIN all'avvio
exec-once = hyprctl dispatch focusmonitor $MONITOR_MAIN
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 1, default:true
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 2
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 3
exec-once = hyprctl dispatch focusworkspaceoncurrentmonitor 4

# Dopo averli creati, vai sul WS 1
exec-once = hyprctl dispatch workspace 1

################################################################################
# BINDS DI SISTEMA / APP
bind = CTRL, SPACE, togglefloating

################################################################################
# DISABILITA FUNZIONALITÀ DI BASE PER TASTI SPECIALI
# Cattura i tasti per usarli come comandi base in Hyprland (niente evento alle app)
# Usa 'true' come no-op
bind = , Insert, exec, true
bind = , Page_Up, exec, true
bind = , Page_Down, exec, true
bind = , mouse:274, exec , true

################################################################################
# MOUSE
bindm = CTRL, mouse:272, movewindow

################################################################################
# Screenshot
bind = , Print, exec, grim -g "$(slurp)" - | wl-copy
bind = SHIFT, Print, exec, grim -g "$(slurp)" ~/Pictures/screenshot-$(date +%Y%m%d_%H%M%S).png

################################################################################
# Media
bindl = , XF86AudioPlay,  exec, playerctl play-pause
bindl = , XF86AudioPause, exec, playerctl play-pause   # opzionale, per tastiere che emettono Pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl  = , XF86AudioMute,        exec, wpctl set-mute   @DEFAULT_AUDIO_SINK@ toggle

################################################################################
# APP OPACITY RULES (Waybar-launched utilities)
# Ensure external component windows follow semi-transparent look
# Active / Inactive opacity: 0.94 / 0.85 to align with global feel
windowrulev2 = opacity 0.94 0.85, class:^(pavucontrol)$
windowrulev2 = opacity 0.94 0.85, class:^(blueman-manager)$
windowrulev2 = opacity 0.94 0.85, class:^([Gg]simplecal)$
windowrulev2 = opacity 0.94 0.85, class:^(rofi)$

# ------------------------------------------------------------------------------

################################################################################
# SUBMAP: emulate SUPER with mouse:274
# Hold mouse:274 to temporarily switch into a submap where all SUPER-binds
# are available without the SUPER modifier. Release mouse:274 to exit.

# Enter submap on mouse:274 PRESS (not release)
bind = , mouse:274, submap, supermode

# Define the submap
submap = supermode

# --- Replicated SUPER binds (no SUPER needed while in this submap) ---
# System
bind = , S, exec, kitty
bind = , D, exec, rofi -show drun
bind = , R, exec, rofi -show run
bind = , W, exec, rofi -show window
bind = , A, killactive
bind = , M, exit
bind = , F, fullscreen
bind = , E, exec, mousepad

# Navigation
bind = , left, movefocus, l
bind = , right, movefocus, r
bind = , up, movefocus, u
bind = , down, movefocus, d

# Workspaces
bind = , SPACE, workspace, 1
bind = , Z, workspace, 2
bind = , X, workspace, 3
bind = , C, workspace, 4

# Move silently to workspaces (SUPER+CTRL -> just CTRL inside submap)
bind = ALT, SPACE, movetoworkspacesilent, 1
bind = ALT, Z,     movetoworkspacesilent, 2
bind = ALT, X,     movetoworkspacesilent, 3
bind = ALT, C,     movetoworkspacesilent, 4

# Exit submap on mouse:274 RELEASE
bindr = , mouse:274, submap, reset
# Leave the submap definition
submap = reset